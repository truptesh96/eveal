if(typeof SQ_DEBUG==="undefined")var SQ_DEBUG=false;(function($){"use strict";$.fn.sq_blocksupport=function(){var $this=this;var i=0;$this.find("#sq_options_support").find("span").on("click",function(){$this.find(".sq_options_support_popup").show();$this.find(".sq_options_feedback_popup").hide()});$this.find("#sq_options_close").on("click",function(){$this.find(".sq_options_support_popup").hide()});$this.find("#sq_options_feedback").find("span").on("click",function(){$this.find(".sq_options_feedback_popup").show();$this.find("#sq_options_feedback").find(".sq_push").hide();$this.find(".sq_options_support_popup").hide()});$this.find("#sq_options_feedback_close").on("click",function(){$this.find(".sq_options_feedback_popup").hide()});$this.find(".sq_label_feedback_smiley").on("click",function(){for(i=0;i<5;i++){$this.find("#sq_options_feedback").find(".sq_icon").removeClass("sq_label_feedback_"+i)}$this.find("#sq_options_feedback").find(".sq_icon").addClass($(this).attr("for"));setTimeout(function(){$this.find("#sq_feedback_submit").trigger("click")},500)});$this.find("#sq_feedback_submit").on("click",function(){$this.find("#sq_feedback_msg").hide();$this.find("#sq_options_feedback_error").html('<p class="sq_minloading" style="margin:0 auto; padding:2px;"></p>');$this.find("#sq_feedback_submit").attr("disabled","disabled");document.cookie="sq_feedback_face="+$("input[name=sq_feedback_face]:radio:checked").val()+"; expires="+60*12+"; path=/";$.post(sqQuery.ajaxurl,{action:"sq_feedback",feedback:$this.find("input[name=sq_feedback_face]:radio:checked").val(),sq_nonce:sqQuery.nonce}).done(function(response){$this.find("#sq_feedback_submit").removeAttr("disabled");$this.find("#sq_feedback_submit").val("Send feedback");if(typeof response.message!=="undefined"){$this.find("#sq_options_feedback_error").removeClass("sq_error").addClass("sq_message").html(response.message)}else $this.find("#sq_options_feedback_error").removeClass("sq_error").html("")}).fail(function(response){if(response.status===200&&response.responseText.indexOf("{")>0){response.responseText=response.responseText.substr(response.responseText.indexOf("{"),response.responseText.lastIndexOf("}"));try{response=$.parseJSON(response.responseText);$this.find("#sq_feedback_submit").removeAttr("disabled");$this.find("#sq_feedback_submit").val("Send feedback");$this.find("textarea[name=sq_feedback_message]").val("");if(typeof response.message!=="undefined"){$this.find("#sq_options_feedback_error").removeClass("sq_error").addClass("sq_message").html(response.message)}else $this.find("#sq_options_feedback_error").removeClass("sq_error").html("")}catch(e){}}else{$this.find("#sq_feedback_submit").removeAttr("disabled");$this.find("#sq_feedback_submit").val("Send feedback");$this.find("#sq_feedback_submit").removeClass("sq_minloading");$this.find("#sq_options_feedback_error").addClass("sq_error").removeClass("sq_message").html("Could not send the feedback")}},"json")})};$(document).ready(function(){$("#sq_options").sq_blocksupport()})})(jQuery);