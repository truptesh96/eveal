if(typeof SQ_DEBUG==="undefined")var SQ_DEBUG=false;(function($){"use strict";$.extend($.fn.dataTableExt.oSort,{"formatted-num-pre":function(a){return parseInt(a)>0?parseInt(a.replace(/[^\d\-\.]/g,"")):99},"formatted-num-asc":function(a,b){return a-b},"formatted-num-desc":function(a,b){return b-a},"formatted-rank-pre":function(a){var div=$("<div>"+a+"</div>");div.find(".badge").remove();if(div.text()==="N/A"||div.text()==="GSC")return 999;return parseFloat(div.text())},"formatted-rank-asc":function(a,b){return a-b},"formatted-rank-desc":function(a,b){return b-a}});$.fn.sq_Ranking=function(){var $this=this;var ranksTable;if($this.find("table.table-ranks").find("tr:first th").length===7){ranksTable=$this.find("table.table-ranks").DataTable({bPaginate:true,bLengthChange:false,bFilter:true,iDisplayLength:25,columnDefs:[{targets:[3,4],sortable:true,type:"formatted-rank"},{targets:[0,5,6],sortable:false}],aaSorting:[3,"asc"]})}else{ranksTable=$this.find("table.table-ranks").DataTable({bPaginate:true,bLengthChange:false,bFilter:true,iDisplayLength:25,columnDefs:[{targets:[3,4],sortable:true,type:"formatted-rank"},{targets:[0,5],sortable:false}],aaSorting:[3,"asc"]})}$this.bulkAction=function(){$this.find(".sq_bulk_select_input").on("click",function(){if(!$(this).is(":checked")){$this.find(".sq_bulk_input").prop("checked",false)}else{$this.find(".sq_bulk_input").prop("checked",true)}});$this.find(".sq_bulk_submit").on("click",function(){var $button=$(this);if($this.find(".sq_bulk_action").find(":selected").val()!==""){if($this.find(".sq_bulk_action").find(":selected").data("confirm")){if(!confirm($this.find(".sq_bulk_action").find(":selected").data("confirm"))){return}}var $sq_bulk_input=[];$($this.find(".sq_bulk_input").serializeArray()).each(function(){$sq_bulk_input.push($(this).attr("value"))});$button.addClass("sq_minloading");$.post(sqQuery.ajaxurl,{action:$this.find(".sq_bulk_action").find(":selected").val(),inputs:$sq_bulk_input,sq_nonce:sqQuery.nonce}).done(function(response){if(typeof response.message!=="undefined"){$.sq_showMessage(response.message).addClass("sq_success");if($this.find(".sq_bulk_action").find(":selected").val()==="sq_ajax_rank_bulk_refresh"){$this.find(".sq_bulk_input").each(function(){if($(this).is(":checked")){$(this).parents("tr:last").find(".sq_research_doserp").remove();$(this).prop("checked",false)}})}else if($this.find(".sq_bulk_action").find(":selected").val()==="sq_ajax_rank_bulk_delete"){$this.find(".sq_bulk_input").each(function(){if($(this).is(":checked")){ranksTable.row($(this).parents("tr:last")).remove().draw()}})}else{location.reload()}}else if(typeof response.error!=="undefined"){$.sq_showMessage(response.error)}$button.removeClass("sq_minloading")}).fail(function(){$button.removeClass("sq_minloading")},"json")}})};$this.bulkAction();return $this};$(document).ready(function(){if($("#sq_ranks").find("table.table-ranks").length>0){$("#sq_ranks").sq_Ranking()}$(".sq_research_add_briefcase").each(function(){$(this).on("click",function(){$(this).sq_addBriefcase()})})})})(jQuery);